{"ast":null,"code":"import _slicedToArray from\"/home/rutts07/IIITH_Files/DASS/Assignment1/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import{Link,useLocation,useParams}from\"react-router-dom\";import Badge from\"@mui/material/Badge\";import axios from\"axios\";import Paper from\"@mui/material/Paper\";import Grid from\"@mui/material/Grid\";import TableCell from\"@mui/material/TableCell\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import Button from\"@mui/material/Button\";import FastfoodIcon from\"@mui/icons-material/Fastfood\";import ShoppingCartIcon from\"@mui/icons-material/ShoppingCart\";import ShoppingCartCheckoutIcon from\"@mui/icons-material/ShoppingCartCheckout\";import{Typography}from\"@mui/material\";import Box from\"@mui/material/Box\";import Tooltip from\"@mui/material/Tooltip\";import Zoom from\"@mui/material/Zoom\";import LogoutIcon from\"@mui/icons-material/Logout\";import ShoppingBagIcon from\"@mui/icons-material/ShoppingBag\";import Menu from\"@mui/material/Menu\";import MenuItem from\"@mui/material/MenuItem\";import MonetizationOnIcon from\"@mui/icons-material/MonetizationOn\";import AccountCircleIcon from\"@mui/icons-material/AccountCircle\";import Card from\"@mui/material/Card\";import CardActions from\"@mui/material/CardActions\";import CardContent from\"@mui/material/CardContent\";import{styled,alpha}from\"@mui/material/styles\";import Toolbar from\"@mui/material/Toolbar\";import InputBase from\"@mui/material/InputBase\";import MenuIcon from\"@mui/icons-material/Menu\";import SearchIcon from\"@mui/icons-material/Search\";import AddShoppingCartIcon from\"@mui/icons-material/AddShoppingCart\";import AddCardIcon from\"@mui/icons-material/AddCard\";import TextField from\"@mui/material/TextField\";import DeleteForeverIcon from\"@mui/icons-material/DeleteForever\";import List from\"@mui/material/List\";import ListItem from\"@mui/material/ListItem\";import Divider from\"@mui/material/Divider\";import Autocomplete from\"@mui/material/Autocomplete\";import IconButton from\"@mui/material/IconButton\";import InputAdornment from\"@mui/material/InputAdornment\";import ArrowUpwardIcon from\"@mui/icons-material/ArrowUpward\";import ArrowDownwardIcon from\"@mui/icons-material/ArrowDownward\";import\"./Nav.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BuyerPage(){// const location = useLocation();\nvar _id=\"\"+useParams().username;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showWallet=_useState2[0],setShowWallet=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),walletBalance=_useState4[0],setWalletBalance=_useState4[1];var _useState5=useState(\"0\"),_useState6=_slicedToArray(_useState5,2),changeWallet=_useState6[0],setChangeWallet=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),walletError=_useState8[0],setWalletError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),search=_useState10[0],setSearch=_useState10[1];// Adjust the items of each vendor\nvar length=5;var _useState11=useState(new Array(length).fill(0)),_useState12=_slicedToArray(_useState11,2),array=_useState12[0],setArray=_useState12[1];useEffect(function(){axios.post(\"http://localhost:5000/buyer/wallet_balance\",{_id:_id}).then(function(response){setWalletBalance(response.data);}).catch(function(error){});axios.post(\"http://localhost:5000/buyer/orders\",{_id:_id}).then(function(response){setItemsOnCart(response.data.length);setCartItems(response.data);}).catch(function(error){});},[]);function WalletCard(){return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Card,{alignItems:\"flex-start\",sx:{maxWidth:275},children:/*#__PURE__*/_jsxs(CardContent,{sx:{alignItems:\"center\"},variant:\"outlined\",children:[/*#__PURE__*/_jsx(Typography,{sx:{alignItems:\"center\",fontSize:20},color:\"text.secondary\",gutterBottom:true,children:\"Your Current Balance :\"}),/*#__PURE__*/_jsx(Box,{sx:{justifyContent:\"center\",alignItems:\"center\",fontSize:30},children:walletBalance}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{sx:{alignItems:\"center\"},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){setWalletBalance(walletBalance+25);var BuyerDetails={_id:_id,wallet:walletBalance+25};axios.post(\"http://localhost:5000/buyer/change-wallet_balance\",BuyerDetails).then(function(response){console.log(response.data);}).catch(function(error){});},children:\"+25\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){setWalletBalance(walletBalance+50);var BuyerDetails={_id:_id,wallet:walletBalance+50};axios.post(\"http://localhost:5000/buyer/change-wallet_balance\",BuyerDetails).then(function(response){console.log(response.data);}).catch(function(error){});},children:\"+50\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){setWalletBalance(walletBalance+75);var BuyerDetails={_id:_id,wallet:walletBalance+75};axios.post(\"http://localhost:5000/buyer/change-wallet_balance\",BuyerDetails).then(function(response){console.log(response.data);}).catch(function(error){});},children:\"+75\"})})]})})]})}),\"\\u2003\"]});}var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),foods=_useState14[0],setFoods=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),showFood=_useState16[0],setShowFood=_useState16[1];function SearchFood(){axios.post(\"http://localhost:5000/food/search-food\",{search:search}).then(function(response){setFoods(response.data);if(response.data.length>0){setSearch(\"\");setShowFood(true);}else{alert(\"Item not found !\");setShowFood(false);}}).catch(function(error){});}function DisplaySearchedFood(){return/*#__PURE__*/_jsxs(Paper,{children:[/*#__PURE__*/_jsx(Typography,{sx:{fontSize:18},color:\"text.secondary\",marginLeft:\"15px\",children:\"Search Results\"}),/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Shop\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Price\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:foods.map(function(food,ind){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:food.shopName}),/*#__PURE__*/_jsx(TableCell,{children:food.price})]},ind);})})]})]});}var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),itemsOnCart=_useState18[0],setItemsOnCart=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),cartItems=_useState20[0],setCartItems=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showCart=_useState22[0],setShowCart=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),cartTotal=_useState24[0],setCartTotal=_useState24[1];function CartItems(props){setCartTotal(props.children.reduce(function(a,v){return a=a+v.price;},0));return/*#__PURE__*/_jsxs(Paper,{sx:{alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Shop\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Item Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Price\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:props.children.map(function(food,ind){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:food.shopName}),/*#__PURE__*/_jsx(TableCell,{children:food.itemName}),/*#__PURE__*/_jsxs(TableCell,{children:[food.price,/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setItemsOnCart(itemsOnCart-1);var s_id=food._id;axios.post(\"http://localhost:5000/buyer/delete-food\",{_id:_id,s_id:s_id}).then(function(){}).catch(function(error){console.log(error);});axios.post(\"http://localhost:5000/buyer/orders\",{_id:_id}).then(function(response){setCartItems(response.data);}).catch(function(error){});if(showCart==true){setShowCart(false);setTimeout(function(){setShowCart(true);},3000);}},children:/*#__PURE__*/_jsx(DeleteForeverIcon,{})})]})]},ind);})})]}),/*#__PURE__*/_jsx(Box,{sx:{alignItems:\"center\"},marginLeft:\"140px\",children:/*#__PURE__*/_jsxs(Typography,{sx:{alignItems:\"center\",fontSize:20},color:\"text.secondary\",gutterBottom:true,children:[\"Total : \",cartTotal,\" \",/*#__PURE__*/_jsx(Button,{children:/*#__PURE__*/_jsx(ShoppingCartCheckoutIcon,{onClick:function onClick(){if(cartTotal>walletBalance)alert(\"Insufficient Balance ! Delete Items or Add Money !!!\");else setWalletBalance(walletBalance-cartTotal);}})})]})})]});}function UsersList(){var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),vendors=_useState26[0],setVendors=_useState26[1];useEffect(function(){axios.get(\"http://localhost:5000/food/vendor-food\").then(function(response){setVendors(response.data);}).catch(function(error){});},[]);function ShowVendorFood(props){return/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Item Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Category\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:props.children.map(function(food,ind){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:food.itemName}),/*#__PURE__*/_jsx(TableCell,{children:food.price}),/*#__PURE__*/_jsxs(TableCell,{children:[food.category,/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setItemsOnCart(itemsOnCart+1);var foodDets={shopName:props.shopName,itemName:food.itemName,price:food.price};axios.post(\"http://localhost:5000/buyer/add-food\",{_id:_id,foodDets:foodDets}).then(function(){}).catch(function(error){console.log(error);});axios.post(\"http://localhost:5000/buyer/orders\",{_id:_id}).then(function(response){setCartItems(response.data);console.log(cartItems);}).catch(function(error){});if(showCart==true){setShowCart(false);setTimeout(function(){setShowCart(true);},5000);}},children:/*#__PURE__*/_jsx(AddShoppingCartIcon,{})})]})]},ind);})})]})});}return/*#__PURE__*/_jsx(Grid,{container:true,alignItems:\"flex-start\",spacing:0,direction:\"column\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{children:\"Vendor Name\"})})}),/*#__PURE__*/_jsx(TableBody,{children:vendors.map(function(vendor,ind){return/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsxs(TableCell,{children:[vendor._id,/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:function onClick(){var list=[];for(var i=0;i<length;i++){if(i==ind&&array[ind]==0)list.push(1);else if(i==ind&&array[ind]==1)list.push(0);else list.push(array[i]);}setArray(list);},children:/*#__PURE__*/_jsx(FastfoodIcon,{})}),array[ind]?/*#__PURE__*/_jsx(ShowVendorFood,{shopName:vendor._id,children:vendor.details}):null]})},ind);})})]})})})});}var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),searchError=_useState28[0],setSearchError=_useState28[1];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"Navigator1\",children:[/*#__PURE__*/_jsxs(Box,{sx:{width:\"100%\",display:\"inline-flex\",alignItems:\"center\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(Typography,{children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2003\\u2003Food Items\"})}),\"\\u2003 \\u2003 \\u2003\",/*#__PURE__*/_jsx(TextField,{value:search,size:\"small\",onChange:function onChange(e){return setSearch(e.target.value);},label:\"Search\",type:\"text\",variant:\"outlined\",color:\"primary\",error:searchError}),\"\\u2003\",/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){if(search==\"\")setSearchError(true);else SearchFood();},children:/*#__PURE__*/_jsx(SearchIcon,{})})]}),\"\\u2003 \\u2003\",/*#__PURE__*/_jsxs(Box,{sx:{flexShrink:0,alignItems:\"center\",justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(Tooltip,{TransitionComponent:Zoom,title:\"Shopping Bag\",arrow:true,children:/*#__PURE__*/_jsx(Button,{sx:{alignItems:\"center\",borderRadius:\"16px\"},size:\"small\",children:/*#__PURE__*/_jsx(ShoppingBagIcon,{fontSize:\"large\"})})}),/*#__PURE__*/_jsx(Tooltip,{TransitionComponent:Zoom,title:\"Cart\",arrow:true,children:/*#__PURE__*/_jsx(Button,{sx:{alignItems:\"center\",borderRadius:\"16px\"},size:\"small\",onClick:function onClick(){if(showCart==false)setShowCart(true);else setShowCart(false);axios.post(\"http://localhost:5000/buyer/orders\",{_id:_id}).then(function(response){setCartItems(response.data);}).catch(function(error){});},children:/*#__PURE__*/_jsx(Badge,{badgeContent:itemsOnCart,color:\"error\",children:/*#__PURE__*/_jsx(ShoppingCartIcon,{fontSize:\"large\"})})})}),/*#__PURE__*/_jsx(Button,{sx:{alignItems:\"center\",borderRadius:\"16px\"},size:\"small\",onClick:function onClick(){setShowWallet(!showWallet);},children:/*#__PURE__*/_jsx(MonetizationOnIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/profile/\"+_id},children:/*#__PURE__*/_jsx(Tooltip,{TransitionComponent:Zoom,title:\"Profile\",arrow:true,children:/*#__PURE__*/_jsx(Button,{sx:{alignItems:\"center\",borderRadius:\"16px\"},size:\"small\",children:/*#__PURE__*/_jsx(Badge,{badgeContent:0,color:\"error\",children:/*#__PURE__*/_jsx(AccountCircleIcon,{fontSize:\"large\"})})})})}),/*#__PURE__*/_jsx(Link,{to:\"/\",style:{color:\"black\",textDecoration:\"inherit\"},children:/*#__PURE__*/_jsx(Tooltip,{TransitionComponent:Zoom,title:\"Log Out\",arrow:true,children:/*#__PURE__*/_jsx(Button,{sx:{alignItems:\"center\",borderRadius:\"16px\"},children:/*#__PURE__*/_jsx(LogoutIcon,{fontSize:\"large\"})})})})]})]})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"center\",direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:3.5,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(UsersList,{})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:1.5,children:[/*#__PURE__*/_jsx(\"br\",{}),showFood?/*#__PURE__*/_jsx(DisplaySearchedFood,{}):null]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:3.5,children:[/*#__PURE__*/_jsx(\"br\",{}),showCart?/*#__PURE__*/_jsx(CartItems,{children:cartItems}):null]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:2.5,children:[/*#__PURE__*/_jsx(\"br\",{}),showWallet?/*#__PURE__*/_jsx(WalletCard,{}):null,\" \\u2003\"]})]}),/*#__PURE__*/_jsx(\"br\",{})]})]});}","map":{"version":3,"sources":["/home/rutts07/IIITH_Files/DASS/Assignment1/frontend/src/routes/Buyer.js"],"names":["React","useState","useEffect","Link","useLocation","useParams","Badge","axios","Paper","Grid","TableCell","TableHead","TableRow","Table","TableBody","Button","FastfoodIcon","ShoppingCartIcon","ShoppingCartCheckoutIcon","Typography","Box","Tooltip","Zoom","LogoutIcon","ShoppingBagIcon","Menu","MenuItem","MonetizationOnIcon","AccountCircleIcon","Card","CardActions","CardContent","styled","alpha","Toolbar","InputBase","MenuIcon","SearchIcon","AddShoppingCartIcon","AddCardIcon","TextField","DeleteForeverIcon","List","ListItem","Divider","Autocomplete","IconButton","InputAdornment","ArrowUpwardIcon","ArrowDownwardIcon","BuyerPage","_id","username","showWallet","setShowWallet","walletBalance","setWalletBalance","changeWallet","setChangeWallet","walletError","setWalletError","search","setSearch","length","Array","fill","array","setArray","post","then","response","data","catch","error","setItemsOnCart","setCartItems","WalletCard","maxWidth","alignItems","fontSize","justifyContent","BuyerDetails","wallet","console","log","foods","setFoods","showFood","setShowFood","SearchFood","alert","DisplaySearchedFood","map","food","ind","shopName","price","itemsOnCart","cartItems","showCart","setShowCart","cartTotal","setCartTotal","CartItems","props","children","reduce","a","v","itemName","s_id","setTimeout","UsersList","vendors","setVendors","get","ShowVendorFood","category","foodDets","vendor","list","i","push","details","searchError","setSearchError","width","display","flexDirection","e","target","value","flexShrink","borderRadius","pathname","color","textDecoration"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport Badge from \"@mui/material/Badge\";\nimport axios from \"axios\";\nimport Paper from \"@mui/material/Paper\";\nimport Grid from \"@mui/material/Grid\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport Button from \"@mui/material/Button\";\nimport FastfoodIcon from \"@mui/icons-material/Fastfood\";\nimport ShoppingCartIcon from \"@mui/icons-material/ShoppingCart\";\nimport ShoppingCartCheckoutIcon from \"@mui/icons-material/ShoppingCartCheckout\";\nimport { Typography } from \"@mui/material\";\nimport Box from \"@mui/material/Box\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport Zoom from \"@mui/material/Zoom\";\nimport LogoutIcon from \"@mui/icons-material/Logout\";\nimport ShoppingBagIcon from \"@mui/icons-material/ShoppingBag\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport MonetizationOnIcon from \"@mui/icons-material/MonetizationOn\";\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\nimport Card from \"@mui/material/Card\";\nimport CardActions from \"@mui/material/CardActions\";\nimport CardContent from \"@mui/material/CardContent\";\nimport { styled, alpha } from \"@mui/material/styles\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport InputBase from \"@mui/material/InputBase\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport AddShoppingCartIcon from \"@mui/icons-material/AddShoppingCart\";\nimport AddCardIcon from \"@mui/icons-material/AddCard\";\nimport TextField from \"@mui/material/TextField\";\nimport DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Divider from \"@mui/material/Divider\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport IconButton from \"@mui/material/IconButton\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport ArrowUpwardIcon from \"@mui/icons-material/ArrowUpward\";\nimport ArrowDownwardIcon from \"@mui/icons-material/ArrowDownward\";\n\nimport \"./Nav.css\";\n\nexport default function BuyerPage() {\n  // const location = useLocation();\n  const _id = \"\" + useParams().username;\n\n  const [showWallet, setShowWallet] = useState(false);\n  const [walletBalance, setWalletBalance] = useState(0);\n\n  const [changeWallet, setChangeWallet] = useState(\"0\");\n  const [walletError, setWalletError] = useState(false);\n\n  const [search, setSearch] = useState(\"\");\n\n  // Adjust the items of each vendor\n  const length = 5;\n  const [array, setArray] = useState(new Array(length).fill(0));\n\n  useEffect(() => {\n    axios\n      .post(\"http://localhost:5000/buyer/wallet_balance\", { _id })\n      .then((response) => {\n        setWalletBalance(response.data);\n      })\n      .catch((error) => {});\n\n    axios\n      .post(\"http://localhost:5000/buyer/orders\", { _id })\n      .then((response) => {\n        setItemsOnCart(response.data.length);\n        setCartItems(response.data);\n      })\n      .catch((error) => {});\n  }, []);\n\n  function WalletCard() {\n    return (\n      <Box>\n        <Card alignItems=\"flex-start\" sx={{ maxWidth: 275 }}>\n          <CardContent sx={{ alignItems: \"center\" }} variant=\"outlined\">\n            <Typography\n              sx={{ alignItems: \"center\", fontSize: 20 }}\n              color=\"text.secondary\"\n              gutterBottom\n            >\n              Your Current Balance :\n            </Typography>\n            <Box\n              sx={{\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                fontSize: 30,\n              }}\n            >\n              {walletBalance}\n            </Box>\n            <br></br>\n            <Box\n              sx={{\n                alignItems: \"center\",\n              }}\n            >\n              <Grid container spacing={1}>\n                <Grid item>\n                  <Button\n                    variant=\"contained\"\n                    onClick={function () {\n                      setWalletBalance(walletBalance + 25);\n\n                      const BuyerDetails = {\n                        _id: _id,\n                        wallet: walletBalance + 25,\n                      };\n\n                      axios\n                        .post(\n                          \"http://localhost:5000/buyer/change-wallet_balance\",\n                          BuyerDetails\n                        )\n                        .then((response) => {\n                          console.log(response.data);\n                        })\n                        .catch((error) => {});\n                    }}\n                  >\n                    +25\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button\n                    variant=\"contained\"\n                    onClick={function () {\n                      setWalletBalance(walletBalance + 50);\n\n                      const BuyerDetails = {\n                        _id: _id,\n                        wallet: walletBalance + 50,\n                      };\n\n                      axios\n                        .post(\n                          \"http://localhost:5000/buyer/change-wallet_balance\",\n                          BuyerDetails\n                        )\n                        .then((response) => {\n                          console.log(response.data);\n                        })\n                        .catch((error) => {});\n                    }}\n                  >\n                    +50\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button\n                    variant=\"contained\"\n                    onClick={function () {\n                      setWalletBalance(walletBalance + 75);\n\n                      const BuyerDetails = {\n                        _id: _id,\n                        wallet: walletBalance + 75,\n                      };\n\n                      axios\n                        .post(\n                          \"http://localhost:5000/buyer/change-wallet_balance\",\n                          BuyerDetails\n                        )\n                        .then((response) => {\n                          console.log(response.data);\n                        })\n                        .catch((error) => {});\n                    }}\n                  >\n                    +75\n                  </Button>\n                </Grid>\n              </Grid>\n            </Box>\n          </CardContent>\n        </Card>\n        &emsp;\n      </Box>\n    );\n  }\n\n  const [foods, setFoods] = useState([]);\n  const [showFood, setShowFood] = useState(false);\n\n  function SearchFood() {\n    axios\n      .post(\"http://localhost:5000/food/search-food\", { search })\n      .then((response) => {\n        setFoods(response.data);\n        if (response.data.length > 0) {\n          setSearch(\"\");\n          setShowFood(true);\n        } else {\n          alert(\"Item not found !\");\n          setShowFood(false);\n        }\n      })\n      .catch((error) => {});\n  }\n\n  function DisplaySearchedFood() {\n    return (\n      <Paper>\n        <Typography\n          sx={{ fontSize: 18 }}\n          color=\"text.secondary\"\n          marginLeft={\"15px\"}\n        >\n          Search Results\n        </Typography>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Shop</TableCell>\n              <TableCell>Price</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {foods.map((food, ind) => (\n              <TableRow key={ind}>\n                <TableCell>{food.shopName}</TableCell>\n                <TableCell>{food.price}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </Paper>\n    );\n  }\n\n  const [itemsOnCart, setItemsOnCart] = useState(0);\n  const [cartItems, setCartItems] = useState([]);\n  const [showCart, setShowCart] = useState(false);\n  const [cartTotal, setCartTotal] = useState(0);\n\n  function CartItems(props) {\n    setCartTotal(props.children.reduce((a, v) => (a = a + v.price), 0));\n    return (\n      <Paper sx={{ alignItems: \"center\" }}>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Shop</TableCell>\n              <TableCell>Item Name</TableCell>\n              <TableCell>Price</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {props.children.map((food, ind) => (\n              <TableRow key={ind}>\n                <TableCell>{food.shopName}</TableCell>\n                <TableCell>{food.itemName}</TableCell>\n                <TableCell>\n                  {food.price}\n                  <Button\n                    onClick={function () {\n                      setItemsOnCart(itemsOnCart - 1);\n                      const s_id = food._id;\n\n                      axios\n                        .post(\"http://localhost:5000/buyer/delete-food\", {\n                          _id,\n                          s_id,\n                        })\n                        .then(() => {})\n                        .catch((error) => {\n                          console.log(error);\n                        });\n\n                      axios\n                        .post(\"http://localhost:5000/buyer/orders\", { _id })\n                        .then((response) => {\n                          setCartItems(response.data);\n                        })\n                        .catch((error) => {});\n\n                      if (showCart == true) {\n                        setShowCart(false);\n                        setTimeout(function () {\n                          setShowCart(true);\n                        }, 3000);\n                      }\n                    }}\n                  >\n                    <DeleteForeverIcon></DeleteForeverIcon>\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <Box sx={{ alignItems: \"center\" }} marginLeft={\"140px\"}>\n          <Typography\n            sx={{ alignItems: \"center\", fontSize: 20 }}\n            color=\"text.secondary\"\n            gutterBottom\n          >\n            Total : {cartTotal}{\" \"}\n            <Button>\n              <ShoppingCartCheckoutIcon\n                onClick={function () {\n                  if (cartTotal > walletBalance)\n                    alert(\n                      \"Insufficient Balance ! Delete Items or Add Money !!!\"\n                    );\n                  else setWalletBalance(walletBalance - cartTotal);\n                }}\n              ></ShoppingCartCheckoutIcon>\n            </Button>\n          </Typography>\n        </Box>\n      </Paper>\n    );\n  }\n\n  function UsersList() {\n    const [vendors, setVendors] = useState([]);\n\n    useEffect(() => {\n      axios\n        .get(\"http://localhost:5000/food/vendor-food\")\n        .then((response) => {\n          setVendors(response.data);\n        })\n        .catch((error) => {});\n    }, []);\n\n    function ShowVendorFood(props) {\n      return (\n        <Paper>\n          <Table size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Item Name</TableCell>\n                <TableCell>Price</TableCell>\n                <TableCell>Category</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {props.children.map((food, ind) => (\n                <TableRow key={ind}>\n                  <TableCell>{food.itemName}</TableCell>\n                  <TableCell>{food.price}</TableCell>\n                  <TableCell>\n                    {food.category}\n                    <Button\n                      onClick={function () {\n                        setItemsOnCart(itemsOnCart + 1);\n                        const foodDets = {\n                          shopName: props.shopName,\n                          itemName: food.itemName,\n                          price: food.price,\n                        };\n\n                        axios\n                          .post(\"http://localhost:5000/buyer/add-food\", {\n                            _id,\n                            foodDets,\n                          })\n                          .then(() => {})\n                          .catch((error) => {\n                            console.log(error);\n                          });\n\n                        axios\n                          .post(\"http://localhost:5000/buyer/orders\", { _id })\n                          .then((response) => {\n                            setCartItems(response.data);\n                            console.log(cartItems);\n                          })\n                          .catch((error) => {});\n\n                        if (showCart == true) {\n                          setShowCart(false);\n                          setTimeout(function () {\n                            setShowCart(true);\n                          }, 5000);\n                        }\n                      }}\n                    >\n                      <AddShoppingCartIcon></AddShoppingCartIcon>\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Paper>\n      );\n    }\n\n    return (\n      <Grid container alignItems=\"flex-start\" spacing={0} direction=\"column\">\n        <Grid item>\n          <Paper>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Vendor Name</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {vendors.map((vendor, ind) => (\n                  <TableRow key={ind}>\n                    <TableCell>\n                      {vendor._id}\n                      <Button\n                        size=\"small\"\n                        onClick={function () {\n                          const list = [];\n                          for (var i = 0; i < length; i++) {\n                            if (i == ind && array[ind] == 0) list.push(1);\n                            else if (i == ind && array[ind] == 1) list.push(0);\n                            else list.push(array[i]);\n                          }\n                          setArray(list);\n                        }}\n                      >\n                        <FastfoodIcon></FastfoodIcon>\n                      </Button>\n                      {array[ind] ? (\n                        <ShowVendorFood shopName={vendor._id}>\n                          {vendor.details}\n                        </ShowVendorFood>\n                      ) : null}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  const [searchError, setSearchError] = useState(false);\n\n  return (\n    <div>\n      <header>\n        <div className=\"Navigator1\">\n          <Box\n            sx={{\n              width: \"100%\",\n              display: \"inline-flex\",\n              alignItems: \"center\",\n              flexDirection: \"row\",\n            }}\n          >\n            <Typography>\n              <h3>&emsp;&emsp;Food Items</h3>\n            </Typography>\n            &emsp; &emsp; &emsp;\n            <TextField\n              value={search}\n              size=\"small\"\n              onChange={(e) => setSearch(e.target.value)}\n              label=\"Search\"\n              type=\"text\"\n              variant=\"outlined\"\n              color=\"primary\"\n              error={searchError}\n            />\n            &emsp;\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={function () {\n                if (search == \"\") setSearchError(true);\n                else SearchFood();\n              }}\n            >\n              <SearchIcon />\n            </Button>\n          </Box>\n          &emsp; &emsp;\n          <Box\n            sx={{\n              flexShrink: 0,\n              alignItems: \"center\",\n              justifyContent: \"flex-end\",\n            }}\n          >\n            <Tooltip TransitionComponent={Zoom} title=\"Shopping Bag\" arrow>\n              <Button\n                sx={{ alignItems: \"center\", borderRadius: \"16px\" }}\n                size=\"small\"\n              >\n                <ShoppingBagIcon fontSize=\"large\"></ShoppingBagIcon>\n              </Button>\n            </Tooltip>\n\n            <Tooltip TransitionComponent={Zoom} title=\"Cart\" arrow>\n              <Button\n                sx={{ alignItems: \"center\", borderRadius: \"16px\" }}\n                size=\"small\"\n                onClick={function () {\n                  if (showCart == false) setShowCart(true);\n                  else setShowCart(false);\n\n                  axios\n                    .post(\"http://localhost:5000/buyer/orders\", { _id })\n                    .then((response) => {\n                      setCartItems(response.data);\n                    })\n                    .catch((error) => {});\n                }}\n              >\n                <Badge badgeContent={itemsOnCart} color=\"error\">\n                  <ShoppingCartIcon fontSize=\"large\"></ShoppingCartIcon>\n                </Badge>\n              </Button>\n            </Tooltip>\n\n            <Button\n              sx={{ alignItems: \"center\", borderRadius: \"16px\" }}\n              size=\"small\"\n              onClick={function () {\n                setShowWallet(!showWallet);\n              }}\n            >\n              <MonetizationOnIcon fontSize=\"large\"></MonetizationOnIcon>\n            </Button>\n\n            <Link\n              to={{\n                pathname: \"/profile/\" + _id,\n              }}\n            >\n              <Tooltip TransitionComponent={Zoom} title=\"Profile\" arrow>\n                <Button\n                  sx={{ alignItems: \"center\", borderRadius: \"16px\" }}\n                  size=\"small\"\n                >\n                  <Badge badgeContent={0} color=\"error\">\n                    <AccountCircleIcon fontSize=\"large\"></AccountCircleIcon>\n                  </Badge>\n                </Button>\n              </Tooltip>\n            </Link>\n            <Link to=\"/\" style={{ color: \"black\", textDecoration: \"inherit\" }}>\n              <Tooltip TransitionComponent={Zoom} title=\"Log Out\" arrow>\n                <Button sx={{ alignItems: \"center\", borderRadius: \"16px\" }}>\n                  <LogoutIcon fontSize=\"large\"></LogoutIcon>\n                </Button>\n              </Tooltip>\n            </Link>\n          </Box>\n        </div>\n      </header>\n      <Box>\n        <Grid container justifyContent={\"center\"} direction=\"row\" spacing={2}>\n          <Grid item xs={3.5}>\n            <br></br>\n            <UsersList></UsersList>\n          </Grid>\n          <Grid item xs={1.5}>\n            <br></br>\n            {showFood ? <DisplaySearchedFood></DisplaySearchedFood> : null}\n          </Grid>\n          <Grid item xs={3.5}>\n            <br></br>\n            {showCart ? <CartItems>{cartItems}</CartItems> : null}\n          </Grid>\n          <Grid item xs={2.5}>\n            <br></br>\n            {showWallet ? <WalletCard></WalletCard> : null} &emsp;\n          </Grid>\n        </Grid>\n        <br></br>\n      </Box>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}